{% extends "index.html" %}
{% load static %}
{% load leaflet_tags %}
{% block title %}Clay Map{% endblock %}
{% block link %}


       {% leaflet_js %}
       {% leaflet_css %}    


       <style type='text/css'>
            #gis {width: 100%; height:700px;}

            .legend {
                line-height: 18px;
                color: #555;
            }
            .legend i {
                width: 18px;
                height: 18px;
                float: left;
                margin-right: 8px;
                opacity: 1;
            }

       </style>
       <link rel="stylesheet" type="text/css" href="{% static 'leaflet-groupedlayercontrol/leaflet.groupedlayercontrol.css' %}" >
       <script type="text/javascript" src="{% static 'dist/leaflet.ajax.js' %}"> </script>
       <script type="text/javascript" src="{% static 'leaflet-groupedlayercontrol/leaflet.groupedlayercontrol.js' %}"> </script>

{% endblock %}

{% block container %}
<div id="map">
<h3> Map Clay Irrigation District </h3>
<br>


<script type="text/javascript">

        // Set function for color ramp
        function clay(c){
             return c > 80 ? '#d92027' :
                    c > 70 ? '#ff9234' :
                    c > 60 ? '#ffcd3c' :
                    c > 50 ? '#fcf876' :
                    c > 40 ? '#52de97' :
                    c > 30 ? '#c0ffb3' :
                    c > 20 ? '#4d80e4' :
                    c > 10 ? '#46b3e6' :
                             '#b2dffb';
        };


       function out_layers(map, options){
           //To define icons  **********************************************************
            var greenIcon = L.icon({
                iconUrl: 'static/icons/Farmer1_1_green.png',
                shadowUrl: 'static/icons/icon-green50_sombra.png',
                iconSize:     [50, 50], // size of the icon
                shadowSize:   [1, 1], // size of the shadow
                iconAnchor:   [30, 30], // point of the icon which will correspond to marker's location
                //shadowAnchor: [4, 62],  // the same for the shadow
                popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
            });
            var LeafIcon = L.Icon.extend({
                options: {
                shadowUrl: "{% static 'icons/icon-green50_sombra.png'%}",
                iconSize:     [50, 50],
                shadowSize:   [1, 1],
                iconAnchor:   [30, 30],
                //shadowAnchor: [4, 62],
                popupAnchor:  [-3, -76]
                 }
            });
            var farm1_greenIcon = new LeafIcon({iconUrl: "{% static 'icons/Farmer1_1_green.png'%}"}), farm1_blueIcon = new LeafIcon({iconUrl: "{% static 'icons/Farmer1_1_blue.png'%}"}), farm1_redIcon = new LeafIcon({iconUrl: "{% static 'icons/Farmer1_1_red.png'%}"}), farm2_greenIcon = new LeafIcon({iconUrl: "{% static 'icons/Farmer2_1_green.png'%}"}), farm2_blueIcon = new LeafIcon({iconUrl: "{% static 'icons/Farmer2_1_blue.png'%}"}), farm2_redIcon = new LeafIcon({iconUrl: "{% static 'icons/Farmer2_1_red.png'%}"}),     farm3_greenIcon = new LeafIcon({iconUrl: "{% static 'icons/Farmer3_green.png'%}"}), farm3_blueIcon = new LeafIcon({iconUrl: "{% static 'icons/Farmer3_blue.png'%}"}), farm3_redIcon = new LeafIcon({iconUrl: "{% static 'icons/Farmer3_red.png'%}"});
             // ************************************************************************** 
            var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            });
            var OpenTopoMap = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
                 maxZoom: 17,
                 attribution: 'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'
            });
            ///////////////////////////////////////////////////////////////////
            var datasets = new L.GeoJSON.AJAX("{% url 'country' %}",{
                style:function colors(feature){
                    switch(feature.properties.name){
                        case 'Colombia':
                           return{
                             color: 'blue',
                             fillOpacity:0.3
                           };
                        break;    
                        case 'Venezuela':
                            return{
                                color: 'red',
                                fillOpacity:0.3
                            };
                        break; 
                    }
                },
                style:function style(feature){
                           return{
                                 fillColor: setColor(feature.properties.region),
                                 fillOpacity: 0.7,
                                 weight: 2,
                                 opacity: 1,
                                 color: '#ffffff',
                                 dashArray: '3'
                           };
                },                
                onEachFeature: function(feature,layer){
                    layer.bindPopup("<strong>" + feature.properties.name.toString() +"</strong><br/>" + feature.properties.region.toString());
                }
            });
            ////////////////////////////////////////////////////////////
            
            var points = new L.GeoJSON.AJAX("{% url 'incidences' %}",{
                onEachFeature: function(feature,layer){
                    layer.bindPopup(feature.properties.name.toString());
                }, pointToLayer: function (feature, latlng) {
                     if (feature.properties.name == "Andres"){
                            var marker = L.marker(latlng,{icon: farm3_blueIcon});
                     } 
                     else if (feature.properties.name == "Felipe") {
                            var marker = L.marker(latlng,{icon: farm2_blueIcon});
                     }
                     else {
                            var marker = L.marker(latlng,{icon: farm1_blueIcon});
                     };
                  return marker;
              }
            });
            /////////////////////////////////////////////////////////////////////

            var district = new L.GeoJSON.AJAX("{% url 'District' %}",{

                style:function style(feature){
                   return{
                        fillColor: 'white',
                        weight: 2,
                        opacity: 1,
                        color: '#84a9ac',
                        dashArray: '2',
                        fillOpacity: 0.2
                   };
                },

                onEachFeature: function(feature,layer){
                   layer.bindPopup("<strong>" + feature.properties.name.toString() +"</strong><br/>" + feature.properties.area.toString());
                }
            });
            ////////////////////////////////////////////////////////////////////

            var DuitamaPump = new L.GeoJSON.AJAX("{% url 'DuitamaPump' %}",{


                style:function style(feature){
                   return{
                        fillColor: clay(feature.properties.clay),
                        weight: 2,
                        opacity: 1,
                        color: 'white',
                        dashArray: '3',
                        fillOpacity: 1
                   };
                },

                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },  

            });
            ////////////////////////////////////////////////////////////////////

            var AyalasPump = new L.GeoJSON.AJAX("{% url 'AyalasPump' %}",{
                style:function style(feature){
                   return{

                        fillColor: clay(feature.properties.clay),
                        weight: 2,
                        opacity: 1,
                        color: 'white',
                        dashArray: '3',
                        fillOpacity: 1
                   };
                },  

                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                }, 


            });

            ////////////////////////////////////////////////////////////////////

            var CuchePump = new L.GeoJSON.AJAX("{% url 'CuchePump' %}",{
                style:function style(feature){
                   return{

                        fillColor: clay(feature.properties.clay),
                        weight: 2,
                        opacity: 1,
                        color: 'white',
                        dashArray: '3',
                        fillOpacity: 1
                   };
                },

                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },   

            });            
            ////////////////////////////////////////////////////////////////////

            var HolandaPump = new L.GeoJSON.AJAX("{% url 'HolandaPump' %}",{
                style:function style(feature){
                   return{

                        fillColor: clay(feature.properties.clay),
                        weight: 2,
                        opacity: 1,
                        color: 'white',
                        dashArray: '3',
                        fillOpacity: 1
                   };
                },  

                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                }, 

            });            
            ////////////////////////////////////////////////////////////////////
            var lasvueltasPump = new L.GeoJSON.AJAX("{% url 'lasvueltasPump' %}",{
                style:function style(feature){
                   return{

                        fillColor: clay(feature.properties.clay),
                        weight: 2,
                        opacity: 1,
                        color: 'white',
                        dashArray: '3',
                        fillOpacity: 1
                   };
                },  

                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                }, 


            });            
            ////////////////////////////////////////////////////////////////////
            var ministerioPump = new L.GeoJSON.AJAX("{% url 'ministerioPump' %}",{
                style:function style(feature){
                   return{

                        fillColor: clay(feature.properties.clay),
                        weight: 2,
                        opacity: 1,
                        color: 'white',
                        dashArray: '3',
                        fillOpacity: 1
                   };
                },  

                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                }, 

            });            
            ////////////////////////////////////////////////////////////////////
            var moniquiraPump = new L.GeoJSON.AJAX("{% url 'moniquiraPump' %}",{
                style:function style(feature){
                   return{

                        fillColor: clay(feature.properties.clay),
                        weight: 2,
                        opacity: 1,
                        color: 'white',
                        dashArray: '3',
                        fillOpacity: 1
                   };
                },

                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },   

            });            
            ////////////////////////////////////////////////////////////////////
            var pantanovPump = new L.GeoJSON.AJAX("{% url 'pantanovPump' %}",{
                style:function style(feature){
                   return{
                        fillColor: clay(feature.properties.clay),
                        weight: 2,
                        opacity: 1,
                        color: 'white',
                        dashArray: '3',
                        fillOpacity: 1
                   };
                },  

                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                }, 

            });            
            ////////////////////////////////////////////////////////////////////
            var sanrafaelpump = new L.GeoJSON.AJAX("{% url 'sanrafaelpump' %}",{
                style:function style(feature){
                   return{
                        fillColor: clay(feature.properties.clay),
                        weight: 2,
                        opacity: 1,
                        color: 'white',
                        dashArray: '3',
                        fillOpacity: 1
                   };
                },  

                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                }, 

            });
            ////////////////////////////////////////////////////////////////////
            var surbapump = new L.GeoJSON.AJAX("{% url 'surbapump' %}",{
                style:function style(feature){
                   return{
                        fillColor: clay(feature.properties.clay),
                        weight: 2,
                        opacity: 1,
                        color: 'white',
                        dashArray: '3',
                        fillOpacity: 1
                   };
                }, 

                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },  

            });              
            ////////////////////////////////////////////////////////////////////
            var tibasosapump = new L.GeoJSON.AJAX("{% url 'tibasosapump' %}",{
                style:function style(feature){
                   return{
                        fillColor: clay(feature.properties.clay),
                        weight: 2,
                        opacity: 1,
                        color: 'white',
                        dashArray: '3',
                        fillOpacity: 1
                   };
                },

                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },   

            });              
            ////////////////////////////////////////////////////////////////////
            var ayalascentroides = new L.GeoJSON.AJAX("{% url 'ayalascentroides' %}",{


                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },  

                pointToLayer: function (feature, latlng) {
                     if (feature.properties.hc < 1.0 ){
                            var marker = L.marker(latlng,{icon: farm3_blueIcon});
                     } 
                     else if (feature.properties.hc >= 1.0 ) {
                            var marker = L.marker(latlng,{icon: farm2_blueIcon});
                     };
                  return marker;
              }  


            });              
            ////////////////////////////////////////////////////////////////////
            ////////////////////////////////////////////////////////////////////
            var surbacentroides = new L.GeoJSON.AJAX("{% url 'surbacentroids' %}",{


                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },   

                pointToLayer: function (feature, latlng) {
                     if (feature.properties.hc < 1.0 ){
                            var marker = L.marker(latlng,{icon: farm3_blueIcon});
                     } 
                     else if (feature.properties.hc >= 1.0 ) {
                            var marker = L.marker(latlng,{icon: farm2_blueIcon});
                     };
                  return marker;
              }


            });              
            ////////////////////////////////////////////////////////////////////
            ////////////////////////////////////////////////////////////////////
            var cuchecentroides = new L.GeoJSON.AJAX("{% url 'cuchecentroides' %}",{


                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },   

                pointToLayer: function (feature, latlng) {
                     if (feature.properties.hc < 1.0 ){
                            var marker = L.marker(latlng,{icon: farm3_blueIcon});
                     } 
                     else if (feature.properties.hc >= 1.0 ) {
                            var marker = L.marker(latlng,{icon: farm2_blueIcon});
                     };
                  return marker;
              }


            });              
            ////////////////////////////////////////////////////////////////////
            var duitamacentroides = new L.GeoJSON.AJAX("{% url 'duitamacentroides' %}",{


                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },   

                pointToLayer: function (feature, latlng) {
                     if (feature.properties.hc < 1.0 ){
                            var marker = L.marker(latlng,{icon: farm3_blueIcon});
                     } 
                     else if (feature.properties.hc >= 1.0 ) {
                            var marker = L.marker(latlng,{icon: farm2_blueIcon});
                     };
                  return marker;
              }


            });              
            ////////////////////////////////////////////////////////////////////
            var holandacentroids = new L.GeoJSON.AJAX("{% url 'holandacentroids' %}",{


                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },   

                pointToLayer: function (feature, latlng) {
                     if (feature.properties.hc < 1.0 ){
                            var marker = L.marker(latlng,{icon: farm3_blueIcon});
                     } 
                     else if (feature.properties.hc >= 1.0 ) {
                            var marker = L.marker(latlng,{icon: farm2_blueIcon});
                     };
                  return marker;
              }


            });              
            ////////////////////////////////////////////////////////////////////
            var lasvueltascentroids = new L.GeoJSON.AJAX("{% url 'lasvueltascentroids' %}",{


                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },   

                pointToLayer: function (feature, latlng) {
                     if (feature.properties.hc < 1.0 ){
                            var marker = L.marker(latlng,{icon: farm3_blueIcon});
                     } 
                     else if (feature.properties.hc >= 1.0 ) {
                            var marker = L.marker(latlng,{icon: farm2_blueIcon});
                     };
                  return marker;
              }


            });              
            ////////////////////////////////////////////////////////////////////
            var ministeriocentroids = new L.GeoJSON.AJAX("{% url 'ministeriocentroids' %}",{


                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },   

                pointToLayer: function (feature, latlng) {
                     if (feature.properties.hc < 1.0 ){
                            var marker = L.marker(latlng,{icon: farm3_blueIcon});
                     } 
                     else if (feature.properties.hc >= 1.0 ) {
                            var marker = L.marker(latlng,{icon: farm2_blueIcon});
                     };
                  return marker;
              }


            });              
            ////////////////////////////////////////////////////////////////////
            var moniquiracentroids = new L.GeoJSON.AJAX("{% url 'moniquiracentroids' %}",{


                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },   

                pointToLayer: function (feature, latlng) {
                     if (feature.properties.hc < 1.0 ){
                            var marker = L.marker(latlng,{icon: farm3_blueIcon});
                     } 
                     else if (feature.properties.hc >= 1.0 ) {
                            var marker = L.marker(latlng,{icon: farm2_blueIcon});
                     };
                  return marker;
              }


            });              
            ////////////////////////////////////////////////////////////////////
            var pantanovcentroids = new L.GeoJSON.AJAX("{% url 'pantanovcentroids' %}",{


                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },   

                pointToLayer: function (feature, latlng) {
                     if (feature.properties.hc < 1.0 ){
                            var marker = L.marker(latlng,{icon: farm3_blueIcon});
                     } 
                     else if (feature.properties.hc >= 1.0 ) {
                            var marker = L.marker(latlng,{icon: farm2_blueIcon});
                     };
                  return marker;
              }


            });              
            ////////////////////////////////////////////////////////////////////
            var sanrafaelcentroids = new L.GeoJSON.AJAX("{% url 'sanrafaelcentroids' %}",{


                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                },   

                pointToLayer: function (feature, latlng) {
                     if (feature.properties.hc < 1.0 ){
                            var marker = L.marker(latlng,{icon: farm3_blueIcon});
                     } 
                     else if (feature.properties.hc >= 1.0 ) {
                            var marker = L.marker(latlng,{icon: farm2_blueIcon});
                     };
                  return marker;
              }


            });              
            ////////////////////////////////////////////////////////////////////
            var tibasosacentroids = new L.GeoJSON.AJAX("{% url 'tibasosacentroids' %}",{

                onEachFeature: function(feature,layer){
                   layer.bindPopup( " <strong> <h3> Code: " + feature.properties.code.toString() +"<h3/> </strong>" + "<h3> Area: " + feature.properties.area.toString() + "<h3/>" + "<h3> clay: "+ feature.properties.clay.toString() + "<h3/>" + "<h3> silt:"+ feature.properties.silt.toString() + "<h3/>" +
                       "<h3> sand: "+ feature.properties.sand.toString() + "<h3/>"+ "<h3> sp: "+feature.properties.sp.toString() + "<h3/>"+ "<h3> fc: " + feature.properties.fc.toString() + "<h3/>" + "<h3> pwp: " + feature.properties.pwp.toString() + "<h3/>"+ "<h3> hc:"+feature.properties.hc.toString() + "<h3/>" + "<h3> density: "+ feature.properties.density.toString() + "<h3/> " ); 
                }, 

                pointToLayer: function (feature, latlng) {
                     if (feature.properties.hc < 1.0 ){
                            var marker = L.marker(latlng,{icon: farm3_blueIcon});
                     } 
                     else if (feature.properties.hc >= 1.0 ) {
                            var marker = L.marker(latlng,{icon: farm2_blueIcon});
                     };
                  return marker;
              }


            });              
            ////////////////////////////////////////////////////////////////////

            var chicamochariver = new L.GeoJSON.AJAX("{% url 'chicamochariver' %}",{

             });              
            ////////////////////////////////////////////////////////////////////
            var reservoirs = new L.GeoJSON.AJAX("{% url 'reservoirs' %}",{

             });              
            ////////////////////////////////////////////////////////////////////
            // Create Leaflet Control Object for Legend
            var legend = L.control({position: 'bottomright'});

            legend.onAdd = function (map) {

            var div = L.DomUtil.create('div', 'info legend'),
                grades = [0, 10, 20, 30, 40, 50, 60, 70, 80],
                labels = [];

            // loop through our density intervals and generate a label with a colored square for each interval
            for (var i = 0; i < grades.length; i++) {
                div.innerHTML +=
                    '<i style="background:' + clay(grades[i] + 1) + '"></i> ' +
                    grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br>' : '+');
            }

            return div;
            };

            legend.addTo(map);

            chicamochariver.addTo(map);
            reservoirs.addTo(map);
            //surbacentroides.addTo(map);
            //ministeriocentroids.addTo(map);
            //tibasosacentroids.addTo(map);
            //sanrafaelcentroids.addTo(map);
            //pantanovcentroids.addTo(map);
            //moniquiracentroids.addTo(map);
            //holandacentroids.addTo(map);
            //lasvueltascentroids.addTo(map);
            //cuchecentroides.addTo(map);
            //duitamacentroides.addTo(map);
            //ayalascentroides.addTo(map);
            points.addTo(map);
            DuitamaPump.addTo(map);
            AyalasPump.addTo(map);
            CuchePump.addTo(map);
            HolandaPump.addTo(map);
            lasvueltasPump.addTo(map);
            ministerioPump.addTo(map);
            moniquiraPump.addTo(map);
            pantanovPump.addTo(map);
            sanrafaelpump.addTo(map);
            surbapump.addTo(map);
            tibasosapump.addTo(map);
            district.addTo(map);       
            datasets.addTo(map);  


            
            L.marker([51.5, -0.1], {icon: greenIcon}).addTo(map);
            L.marker([20, -10], {icon: farm1_greenIcon}).addTo(map);
            L.marker([25, -15], {icon: farm1_blueIcon}).addTo(map);
            L.marker([30, -20], {icon: farm1_redIcon}).addTo(map);
            L.marker([35, -25], {icon: farm2_greenIcon}).addTo(map);
            L.marker([40, -30], {icon: farm2_blueIcon}).addTo(map);
            L.marker([45, -35], {icon: farm2_redIcon}).addTo(map);
            L.marker([50, -40], {icon: farm3_greenIcon}).addTo(map);
            L.marker([55, -45], {icon: farm3_blueIcon}).addTo(map);
            L.marker([60, -50], {icon: farm3_redIcon}).addTo(map);

            var baseLayers = {
               "OSM": osm,
               "OpenTopoMap": OpenTopoMap
            }
            
            var groupedOverlays = {

                "Centroids": {

                "surbacentroides": surbacentroides,
                "holandacentroids": holandacentroids,
                "tibasosacentroids": tibasosacentroids,
                "sanrafaelcentroids": sanrafaelcentroids,
                "pantanovcentroids": pantanovcentroids,
                "moniquiracentroids": moniquiracentroids,
                "ministeriocentroids": ministeriocentroids,
                "lasvueltascentroids": lasvueltascentroids,
                "cuchecentroides": cuchecentroides,
                "duitamacentroides": duitamacentroides,
                "ayalascentroides": ayalascentroides,

                },
                "Layers": {

                "chicamochariver": chicamochariver,
                "reservoirs": reservoirs,
                "tibasosapump": tibasosapump,
                "DuitamaPump": DuitamaPump,
                "AyalasPump": AyalasPump,    
                "CuchePump": CuchePump,
                "HolandaPump": HolandaPump,
                "lasvueltasPump": lasvueltasPump,
                "ministerioPump": ministerioPump,
                "moniquiraPump": moniquiraPump,
                "pantanovPump": pantanovPump,
                "sanrafaelpump": sanrafaelpump,
                "surbapump": surbapump,
                "district": district,  
               
                

            }
         };

         var excluseGroup = {
            groupCheckboxes: true
         };

         L.control.groupedLayers(baseLayers, groupedOverlays, excluseGroup).addTo(map);


       } 
</script>
<br>
{% leaflet_map "gis" callback="window.out_layers" %}
</div>  

     
{% endblock%}



